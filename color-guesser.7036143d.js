import{z as K,c as f,A as Q,k as M,o as X,f as V,g as v,s as E,r as C,t as _,j as W,i as $,b as A,x as ee,a as B,B as te,F as re,y as j,h as se}from"./chunks/web.e9187fcd.js";import{M as U,T as oe}from"./chunks/modal.a298d3e9.js";import{BoardContainer as le}from"./game.2c340997.js";import{c as ne}from"./chunks/store.38cbc661.js";import{t as z}from"./chunks/tooltip.3cfe08a8.js";import{M as ie}from"./chunks/eyedropper-variant.3ff78677.js";import{M as ae}from"./chunks/menu.89a4463d.js";import"./chunks/arrow-left-top.ea325c40.js";const ce=e=>{const t=Q(void 0);return[()=>{const n=e();return[g=>f(t.Provider,{get value(){return e()},get children(){return g.children}}),n]},()=>K(t)]};function de(e){const[t,s]=M(),r=e?.throw?(i,o)=>{throw s(i instanceof Error?i:new Error(o)),i}:(i,o)=>{s(i instanceof Error?i:new Error(o))},n=e?.api?Array.isArray(e.api)?e.api:[e.api]:[globalThis.localStorage].filter(Boolean),a=e?.prefix?`${e.prefix}.`:"",g=new Map,x=new Proxy({},{get(i,o){let l=g.get(o);l||(l=M(void 0,{equals:!1}),g.set(o,l)),l[0]();const d=n.reduce((c,h)=>{if(c!==null||!h)return c;try{return h.getItem(`${a}${o}`)}catch(y){return r(y,`Error reading ${a}${o} from ${h.name}`),null}},null);return d!==null&&e?.deserializer?e.deserializer(d,o,e?.options):d}}),m=(i,o,l)=>{const d=e?.serializer?e.serializer(o,i,l??e?.options):o,c=`${a}${i}`;n.forEach(y=>{try{y.getItem(c)!==d&&y.setItem(c,d)}catch(k){r(k,`Error setting ${a}${i} to ${d} in ${y.name}`)}});const h=g.get(i);h&&h[1]()},b=i=>n.forEach(o=>{try{o.removeItem(`${a}${i}`)}catch(l){r(l,`Error removing ${a}${i} from ${o.name}`)}}),u=()=>n.forEach(i=>{var o;try{(o=i?.clear)==null||o.call(i)}catch(l){r(l,`Error clearing ${i.name}`)}}),w=()=>{const i={},o=(l,d)=>{if(!i.hasOwnProperty(l)){const c=d&&e?.deserializer?e.deserializer(d,l,e?.options):d;c&&(i[l]=c)}};return n.forEach(l=>{if(typeof l.getAll=="function"){let d;try{d=l.getAll()}catch(c){r(c,`Error getting all values from in ${l.name}`)}for(const c of d)o(c,d[c])}else{let d=0,c;try{for(;c=l.key(d++);)i.hasOwnProperty(c)||o(c,l.getItem(c))}catch(h){r(h,`Error getting all values from ${l.name}`)}}}),i};return e?.sync!==!1&&X(()=>{const i=o=>{var l;let d=!1;n.forEach(c=>{try{c!==o.storageArea&&o.key&&o.newValue!==c.getItem(o.key)&&(o.newValue?c.setItem(o.key,o.newValue):c.removeItem(o.key),d=!0)}catch(h){r(h,`Error synching api ${c.name} from storage event (${o.key}=${o.newValue})`)}}),d&&o.key&&((l=g.get(o.key))==null||l[1]())};"addEventListener"in globalThis?(globalThis.addEventListener("storage",i),V(()=>globalThis.removeEventListener("storage",i))):(n.forEach(o=>{var l;return(l=o.addEventListener)==null?void 0:l.call(o,"storage",i)}),V(()=>n.forEach(o=>{var l;return(l=o.removeEventListener)==null?void 0:l.call(o,"storage",i)})))}),[x,m,{clear:u,error:t,remove:b,toJSON:w}]}var ue=de,fe=e=>(typeof e.clear=="function"||(e.clear=()=>{let t;for(;t=e.key(0);)e.removeItem(t)}),e),R=e=>{if(!e)return"";let t="";for(const s in e){if(!e.hasOwnProperty(s))continue;const r=e[s];t+=r instanceof Date?`; ${s}=${r.toUTCString()}`:typeof r=="boolean"?`; ${s}`:`; ${s}=${r}`}return t},S=fe({_cookies:[globalThis.document,"cookie"],getItem:e=>{var t;return((t=S._cookies[0][S._cookies[1]].match("(^|;)\\s*"+e+"\\s*=\\s*([^;]+)"))==null?void 0:t.pop())??null},setItem:(e,t,s)=>{var r;const n=S.getItem(e);S._cookies[0][S._cookies[1]]=`${e}=${t}${R(s)}`;const a=Object.assign(new Event("storage"),{key:e,oldValue:n,newValue:t,url:(r=globalThis.document)==null?void 0:r.URL,storageArea:S});window.dispatchEvent(a)},removeItem:e=>{S._cookies[0][S._cookies[1]]=`${e}=deleted${R({expires:new Date(0)})}`},key:e=>{let t=null,s=0;return S._cookies[0][S._cookies[1]].replace(/(?:^|;)\s*(.+?)\s*=\s*[^;]+/g,(r,n)=>(!t&&n&&s++===e&&(t=n),"")),t},get length(){let e=0;return S._cookies[0][S._cookies[1]].replace(/(?:^|;)\s*.+?\s*=\s*[^;]+/g,t=>(e+=t?1:0,"")),e}});const ge=e=>{const[t,s]=ue({prefix:e,serializer:r=>JSON.stringify(r),deserializer:r=>JSON.parse(r)});return[t,s]},me=(e,t)=>{let s,r;return e<0?(s=0,r=t-e,Math.floor(Math.random()*(r-s+1)+s)+e):(s=e,r=t,Math.floor(Math.random()*(r-s+1)+s))},N=e=>e[e.length*Math.random()|0],he=e=>{const t=parseInt(e.slice(1,3),16),s=parseInt(e.slice(3,5),16),r=parseInt(e.slice(5,7),16);return`rgb(${t}, ${s}, ${r})`},$e=e=>{const t=parseInt(e.slice(1,3),16)/255,s=parseInt(e.slice(3,5),16)/255,r=parseInt(e.slice(5,7),16)/255,n=Math.max(t,s,r),a=n-Math.min(t,s,r),g=a?n==t?(s-r)/a:n==s?2+(r-t)/a:4+(t-s)/a:0,x=Math.round(60*g<0?60*g+360:60*g),m=Math.round(100*(a?n<=.5?a/(2*n-a):a/(2-(2*n-a)):0)),b=Math.round(100*(2*n-a)/2);return`hsl(${x}, ${m}%, ${b}%)`},ve=e=>{const[t,s,r]=[parseInt(e.slice(1,3),16),parseInt(e.slice(3,5),16),parseInt(e.slice(5,7),16)].map(n=>Math.min(Math.max(n+me(-25,25),0),255).toString(16).padStart(2,"0"));return`#${t}${s}${r}`},O=[{label:"Easy",grid:2},{label:"Normal",grid:3},{label:"Hard",grid:4},{label:"Harder",grid:5},{label:"Hardest",grid:6}],xe=["HEX","RGB","HSL"],be=["#F44336","#E91E63","#9C27B0","#673AB7","#3F51B5","#2196F3","#03A9F4","#00BCD4","#009688","#4CAF50","#8BC34A","#CDDC39","#FFEB3B","#FFC107","#FF9800","#FF5722","#795548","#607D8B"],[_e,L]=ce(()=>{const[e,t]=ne({state:"IDLE",difficulty:{...O[0]},mode:"HEX",streak:0,color:"---",colorGrid:[]}),[s,r]=ge("gtumedei.color-guesser"),n=()=>{r("streak",0),r("streakDifficulty",0),r("rightGuesses",0),r("wrongGuesses",0)},a=(o,l)=>{let d=new Array(o*o).fill(0).map(()=>N(be));return new Set(d).forEach(h=>{const y=ve(h);d=d.map(k=>k==h?y:k)}),l=="RGB"?d.map(h=>he(h)):l=="HSL"?d.map(h=>$e(h)):d},g=(o,l)=>{t("state","PLAYING"),t("difficulty",{...o}),t("mode",l),t("streak",0),m()},x=o=>{const l=o==e.color;return l?(t("streak",d=>d+1),r("rightGuesses",(s.rightGuesses??0)+1),e.streak>(s.streak??0)&&(r("streak",e.streak),r("streakDifficulty",e.difficulty.label))):(t("streak",0),r("wrongGuesses",(s.wrongGuesses??0)+1)),l},m=()=>{t("colorGrid",a(e.difficulty?.grid??2,e.mode??"HEX")),t("color",N(e.colorGrid??[]))},[b,u]=M(!1),[w,i]=M(!1);return{difficulties:O,modes:xe,game:e,gameActions:{startGame:g,registerGuess:x,nextColor:m},storage:s,resetStorage:n,showSettingsModal:b,setShowSettingsModal:u,showStatsModal:w,setShowStatsModal:i}}),we=_('<svg class="icon" viewBox="0 0 24 24" width="1.2em" height="1.2em"><path fill="currentColor" d="M21 7L9 19l-5.5-5.5l1.41-1.41L9 16.17L19.59 5.59L21 7Z"></path></svg>'),ye=(e={})=>(()=>{const t=v(we);return E(t,e,!0,!0),C(),t})(),Se=_('<svg class="icon" viewBox="0 0 24 24" width="1.2em" height="1.2em"><path fill="currentColor" d="M19 6.41L17.59 5L12 10.59L6.41 5L5 6.41L10.59 12L5 17.59L6.41 19L12 13.41L17.59 19L19 17.59L13.41 12L19 6.41Z"></path></svg>'),Ce=(e={})=>(()=>{const t=v(Se);return E(t,e,!0,!0),C(),t})(),pe=_('<svg class="icon" viewBox="0 0 24 24" width="1.2em" height="1.2em"><path fill="currentColor" d="M15.41 16.58L10.83 12l4.58-4.59L14 6l-6 6l6 6l1.41-1.42Z"></path></svg>'),Z=(e={})=>(()=>{const t=v(pe);return E(t,e,!0,!0),C(),t})(),Me=_('<svg class="icon" viewBox="0 0 24 24" width="1.2em" height="1.2em"><path fill="currentColor" d="M8.59 16.58L13.17 12L8.59 7.41L10 6l6 6l-6 6l-1.41-1.42Z"></path></svg>'),J=(e={})=>(()=>{const t=v(Me);return E(t,e,!0,!0),C(),t})(),ke=_('<svg class="icon" viewBox="0 0 24 24" width="1.2em" height="1.2em"><path fill="currentColor" d="M3 22V8h4v14H3m7 0V2h4v20h-4m7 0v-8h4v8h-4Z"></path></svg>'),Y=(e={})=>(()=>{const t=v(ke);return E(t,e,!0,!0),C(),t})(),q=_('<div class="bg-primary-focus flex rounded-full p-6 mb-6"></div>'),Ee=_('<h4 class="section-subheading mb-2">Color Guesser</h4>'),Le=_(`<p class="text-sm mb-8">Are you nerd enough to guess a color based on its RGB code? Let's find out!</p>`),Ge=_('<div class="w-full flex flex-col border rounded-xl divide-y mb-8"><div class="w-full flex items-center gap-2 p-2"><h5 class="text-left text-sm font-mono font-bold flex-grow ml-2">Difficulty</h5><div class="flex gap-2 items-center"><button class="btn icon"></button><span class="text-sm w-16"></span><button class="btn icon"></button></div></div><div class="w-full flex items-center gap-2 p-2"><h5 class="text-left text-sm font-mono font-bold flex-grow ml-2">Mode</h5><div class="flex gap-2 items-center"><button class="btn icon"></button><span class="text-sm w-16"></span><button class="btn icon"></button></div></div></div>'),Ie=_('<div class="w-full grid sm:grid-cols-2 gap-3"><button class="btn accent"></button><a href="/games" class="btn outline">Back to Games</a></div>'),Be=_('<h4 class="section-subheading mb-8">Your Color Guesser Stats</h4>'),Ae=_('<div class="w-full flex flex-col border rounded-xl divide-y mb-8"><div class="w-full flex items-center gap-2 px-4 py-3"><h5 class="text-left text-sm font-mono font-bold flex-grow">Best streak</h5><p></p></div><div class="w-full flex items-center gap-2 px-4 py-3"><h5 class="text-left text-sm font-mono font-bold flex-grow">Total guesses</h5><p></p></div><div class="w-full flex items-center gap-2 px-4 py-3"><h5 class="text-left text-sm font-mono font-bold flex-grow">Accuracy</h5><p></p></div></div>'),Te=_('<div class="w-full flex"><button class="btn accent w-full sm:w-1/2 m-auto">Reset stats</button></div>'),De=_('<div class="w-full flex items-center p-2 rounded-xl border"><p class="ml-3 flex-grow">Color code: <!#><!/></p><button class="btn icon"></button><button class="btn icon"></button></div>'),Fe=_('<button class="group relative w-full h-full rounded-lg"><div><!#><!/><!#><!/></div></button>'),He=_('<div class="h-full grid gap-3"></div>'),Pe=()=>{const e=L(),[t,s]=M(0),r=()=>s(u=>Math.min(u+1,e.difficulties.length-1)),n=()=>s(u=>Math.max(u-1,0)),[a,g]=M(0),x=()=>g(u=>Math.min(u+1,e.modes.length-1)),m=()=>g(u=>Math.max(u-1,0)),b=()=>{e.setShowSettingsModal(!1),e.gameActions.startGame(e.difficulties[t()],e.modes[a()])};return X(()=>e.setShowSettingsModal(!0)),f(U,{class:"flex flex-col items-center text-center w-full",get show(){return e.showSettingsModal},get setShow(){return e.setShowSettingsModal},get persistent(){return e.game.difficulty==null},get children(){return[(()=>{const u=v(q);return $(u,f(ie,{class:"text-3xl text-accent"})),u})(),v(Ee),v(Le),(()=>{const u=v(Ge),w=u.firstChild,i=w.firstChild,o=i.nextSibling,l=o.firstChild,d=l.nextSibling,c=d.nextSibling,h=w.nextSibling,y=h.firstChild,k=y.nextSibling,G=k.firstChild,T=G.nextSibling,I=T.nextSibling;return l.$$click=n,$(l,f(Z,{})),$(d,()=>e.difficulties[t()].label),c.$$click=r,$(c,f(J,{})),G.$$click=m,$(G,f(Z,{})),$(T,()=>e.modes[a()]),I.$$click=x,$(I,f(J,{})),A(p=>{const D=t()==0,F=t()==e.difficulties.length-1,H=a()==0,P=a()==e.difficulties.length-1;return D!==p._v$&&(l.disabled=p._v$=D),F!==p._v$2&&(c.disabled=p._v$2=F),H!==p._v$3&&(G.disabled=p._v$3=H),P!==p._v$4&&(I.disabled=p._v$4=P),p},{_v$:void 0,_v$2:void 0,_v$3:void 0,_v$4:void 0}),C(),u})(),(()=>{const u=v(Ie),w=u.firstChild;return w.$$click=b,$(w,()=>e.game.state=="IDLE"?"Play":"Apply"),C(),u})()]}})},Ve=()=>{const e=L();return f(U,{class:"flex flex-col items-center text-center w-full",get show(){return e.showStatsModal},get setShow(){return e.setShowStatsModal},get children(){return[(()=>{const t=v(q);return $(t,f(Y,{class:"text-3xl text-accent"})),t})(),v(Be),(()=>{const t=v(Ae),s=t.firstChild,r=s.firstChild,n=r.nextSibling,a=s.nextSibling,g=a.firstChild,x=g.nextSibling,m=a.nextSibling,b=m.firstChild,u=b.nextSibling;return $(n,()=>e.storage.streak?`(${e.storage.streakDifficulty}) ${e.storage.streak}`:0),$(x,()=>(e.storage.rightGuesses??0)+(e.storage.wrongGuesses??0)),$(u,()=>+((e.storage.rightGuesses??0)/((e.storage.rightGuesses??0)+(e.storage.wrongGuesses??0))).toFixed(3)),t})(),(()=>{const t=v(Te),s=t.firstChild;return ee(s,"click",e.resetStorage,!0),C(),t})()]}})},ze=()=>{const e=L();return(()=>{const t=v(De),s=t.firstChild,r=s.firstChild,n=r.nextSibling,[a,g]=B(n.nextSibling),x=s.nextSibling,m=x.nextSibling;return $(s,()=>e.game.color,a,g),z(x,()=>[()=>"Stats","top"]),x.$$click=()=>e.setShowStatsModal(!0),$(x,f(Y,{})),z(m,()=>[()=>"Menu","top"]),m.$$click=()=>e.setShowSettingsModal(!0),$(m,f(ae,{})),C(),t})()},Re=e=>{const[t,s]=M(!1),[r,n]=M(!1),a=L(),g=m=>new Promise(b=>setTimeout(b,m)),x=async()=>{a.gameActions.registerGuess(e.color)?(s(!0),await g(500),s(!1),a.gameActions.nextColor()):(n(!0),await g(500),n(!1))};return(()=>{const m=v(Fe),b=m.firstChild,u=b.firstChild,[w,i]=B(u.nextSibling),o=w.nextSibling,[l,d]=B(o.nextSibling);return m.$$click=x,$(b,f(ye,{get class(){return`absolute-center h-1/2 w-1/2 text-black-54 ${t()?"opacity-100":"opacity-0"} transition-opacity`}}),w,i),$(b,f(Ce,{get class(){return`absolute-center h-1/2 w-1/2 text-black-54 ${r()?"opacity-100":"opacity-0"} transition-opacity`}}),l,d),A(c=>{const h=`background-color: ${e.color};`,y=`
        absolute -inset-1.5 rounded-xl border border-accent pointer-events-none
        bg-white-12 opacity-0 group-hover:opacity-100 transition-all
        ${t()?"!opacity-100 !bg-white-50":""}
        ${r()?"!opacity-100 !bg-white-50":""}
      `;return c._v$5=j(m,h,c._v$5),y!==c._v$6&&se(b,c._v$6=y),c},{_v$5:void 0,_v$6:void 0}),C(),m})()},Ne=()=>{const e=L();return f(oe,{enterClass:"opacity-0",exitToClass:"opacity-0",enterActiveClass:"transition-opacity",exitActiveClass:"transition-opacity",mode:"outin",get children(){return f(te,{get when(){return e.game.colorGrid},keyed:!0,children:t=>{const s=e.game.difficulty?.grid;return(()=>{const r=v(He);return $(r,f(re,{each:t??[],children:n=>f(Re,{color:n})})),A(n=>j(r,`grid-template-columns: repeat(${s}, minmax(0, 1fr));`,n)),r})()}})}})},Ke=()=>{const[e]=_e();return f(e,{get children(){return[f(le,{get children(){return f(Ne,{})}}),f(ze,{}),f(Pe,{}),f(Ve,{})]}})};W(["click"]);export{Ke as default};
