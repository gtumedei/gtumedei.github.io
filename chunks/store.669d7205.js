import{$ as l,w as k,x as P,n as _,j as N}from"./web.a2f277f3.js";const h=Symbol("store-raw"),y=Symbol("store-node"),R=Symbol("store-name");function j(e,n){let o=e[l];if(!o){Object.defineProperty(e,l,{value:o=new Proxy(e,z)});const t=Object.keys(e),f=Object.getOwnPropertyDescriptors(e);for(let r=0,i=t.length;r<i;r++){const c=t[r];if(f[c].get){const s=f[c].get.bind(o);Object.defineProperty(e,c,{get:s})}}}return o}function d(e){let n;return e!=null&&typeof e=="object"&&(e[l]||!(n=Object.getPrototypeOf(e))||n===Object.prototype||Array.isArray(e))}function a(e,n=new Set){let o,t,f,r;if(o=e!=null&&e[h])return o;if(!d(e)||n.has(e))return e;if(Array.isArray(e)){Object.isFrozen(e)?e=e.slice(0):n.add(e);for(let i=0,c=e.length;i<c;i++)f=e[i],(t=a(f,n))!==f&&(e[i]=t)}else{Object.isFrozen(e)?e=Object.assign({},e):n.add(e);const i=Object.keys(e),c=Object.getOwnPropertyDescriptors(e);for(let s=0,O=i.length;s<O;s++)r=i[s],!c[r].get&&(f=e[r],(t=a(f,n))!==f&&(e[r]=t))}return e}function w(e){let n=e[y];return n||Object.defineProperty(e,y,{value:n={}}),n}function b(e,n,o){return e[n]||(e[n]=S(o,!0))}function K(e,n){const o=Reflect.getOwnPropertyDescriptor(e,n);return!o||o.get||!o.configurable||n===l||n===y||n===R||(delete o.value,delete o.writable,o.get=()=>e[l][n]),o}function $(e){if(P()){const n=w(e);(n._||(n._=S()))()}}function T(e){return $(e),Reflect.ownKeys(e)}function S(e,n){const[o,t]=N(e,n?{internal:!0}:{equals:!1,internal:!0});return o.$=t,o}const z={get(e,n,o){if(n===h)return e;if(n===l)return o;if(n===k)return $(e);const t=w(e),f=t[n];let r=f?t[n]():e[n];if(n===y||n==="__proto__")return r;if(!f){const i=Object.getOwnPropertyDescriptor(e,n);P()&&(typeof r!="function"||e.hasOwnProperty(n))&&!(i&&i.get)&&(r=b(t,n,r)())}return d(r)?j(r):r},set(){return!0},deleteProperty(){return!0},ownKeys:T,getOwnPropertyDescriptor:K};function g(e,n,o){if(e[n]===o)return;const t=e[n],f=e.length;o===void 0?delete e[n]:e[n]=o;let r=w(e),i;(i=b(r,n,t))&&i.$(()=>o),Array.isArray(e)&&e.length!==f&&(i=b(r,"length",f))&&i.$(e.length),(i=r._)&&i.$()}function p(e,n){const o=Object.keys(n);for(let t=0;t<o.length;t+=1){const f=o[t];g(e,f,n[f])}}function E(e,n){if(typeof n=="function"&&(n=n(e)),n=a(n),Array.isArray(n)){if(e===n)return;let o=0,t=n.length;for(;o<t;o++){const f=n[o];e[o]!==f&&g(e,o,f)}g(e,"length",t)}else p(e,n)}function u(e,n,o=[]){let t,f=e;if(n.length>1){t=n.shift();const i=typeof t,c=Array.isArray(e);if(Array.isArray(t)){for(let s=0;s<t.length;s++)u(e,[t[s]].concat(n),o);return}else if(c&&i==="function"){for(let s=0;s<e.length;s++)t(e[s],s)&&u(e,[s].concat(n),o);return}else if(c&&i==="object"){const{from:s=0,to:O=e.length-1,by:D=1}=t;for(let A=s;A<=O;A+=D)u(e,[A].concat(n),o);return}else if(n.length>1){u(e[t],n,[t].concat(o));return}f=e[t],o=[t].concat(o)}let r=n[0];typeof r=="function"&&(r=r(f,o),r===f)||t===void 0&&r==null||(r=a(r),t===void 0||d(f)&&d(r)&&!Array.isArray(r)?p(f,r):g(e,t,r))}function W(...[e,n]){const o=a(e||{}),t=Array.isArray(o),f=j(o);function r(...i){_(()=>{t&&i.length===1?E(o,i[0]):u(o,i)})}return[f,r]}export{W as c};
