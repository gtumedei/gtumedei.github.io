import{k,q as P,l as L,u as S,v as j,p as H,j as R,c as x,g as v,i as b,b as _,h as q,r as D,P as G,t as z}from"./web.d5a2c8dc.js";function F(e){requestAnimationFrame(()=>{requestAnimationFrame(e)})}const M=e=>{let n,a=!0;const[C,m]=k(),[E,T]=k(),B=P(()=>e.children),{onBeforeEnter:h,onEnter:f,onAfterEnter:A,onBeforeExit:g,onExit:u,onAfterExit:y}=e,o=L(()=>{const t=e.name||"s";return{enterActiveClass:e.enterActiveClass||t+"-enter-active",enterClass:e.enterClass||t+"-enter",enterToClass:e.enterToClass||t+"-enter-to",exitActiveClass:e.exitActiveClass||t+"-exit-active",exitClass:e.exitClass||t+"-exit",exitToClass:e.exitToClass||t+"-exit-to"}});function w(t,s){if(!a||e.appear){let i=function(d){t&&(!d||d.target===t)&&(t.removeEventListener("transitionend",i),t.removeEventListener("animationend",i),t.classList.remove(...c),t.classList.remove(...l),H(()=>{C()!==t&&m(t),E()===t&&T(void 0)}),A&&A(t),e.mode==="inout"&&$(t,s))};const r=o().enterClass.split(" "),c=o().enterActiveClass.split(" "),l=o().enterToClass.split(" ");h&&h(t),t.classList.add(...r),t.classList.add(...c),F(()=>{t.classList.remove(...r),t.classList.add(...l),f&&f(t,()=>i()),(!f||f.length<2)&&(t.addEventListener("transitionend",i),t.addEventListener("animationend",i))})}s&&!e.mode?T(t):m(t)}function $(t,s){const r=o().exitClass.split(" "),c=o().exitActiveClass.split(" "),l=o().exitToClass.split(" ");if(!s.parentNode)return i();g&&g(s),s.classList.add(...r),s.classList.add(...c),F(()=>{s.classList.remove(...r),s.classList.add(...l)}),u&&u(s,()=>i()),(!u||u.length<2)&&(s.addEventListener("transitionend",i),s.addEventListener("animationend",i));function i(d){(!d||d.target===s)&&(s.removeEventListener("transitionend",i),s.removeEventListener("animationend",i),s.classList.remove(...c),s.classList.remove(...l),C()===s&&m(void 0),y&&y(s),e.mode==="outin"&&w(t,s))}}return S(t=>{for(n=B();typeof n=="function";)n=n();return j(()=>(n&&n!==t&&(e.mode!=="outin"?w(n,t):a&&m(n)),t&&t!==n&&e.mode!=="inout"&&$(n,t),a=!1,n))}),[C,E]},N=z("<div></div>"),I=z('<div class="fixed inset-0 bg-black-38 z-30"></div>'),K=e=>x(G,{get children(){return[x(M,{enterClass:"opacity-0",exitToClass:"opacity-0",enterActiveClass:"transition-opacity",exitActiveClass:"transition-opacity",get children(){return L(()=>!!e.show(),!0)()&&v(I)}}),(()=>{const n=v(N);return n.$$click=a=>a.target==a.currentTarget&&!e.persistent&&e.setShow(!1),b(n,x(M,{enterClass:"opacity-0 transform -translate-y-2",exitToClass:"opacity-0 transform -translate-y-2",enterActiveClass:"transition-all",exitActiveClass:"transition-all",get children(){return L(()=>!!e.show(),!0)()&&(()=>{const a=v(N);return b(a,()=>e.children),_(()=>q(a,`card container max-w-lg m-auto pointer-events-auto ${e.class} ${e.class?.includes("w-")?"":"w-min"}`)),a})()}})),_(()=>q(n,`fixed inset-0 p-3 max-h-screen overflow-y-auto flex z-40 ${e.show()?"":"pointer-events-none"}`)),D(),n})()]}});R(["click"]);export{K as M,M as T};
