import{$ as l,m as P,n as $,p as N,k as R}from"./web.92b2a543.js";const w=Symbol("store-raw"),a=Symbol("store-node"),K=Symbol("store-name");function j(n,e){let o=n[l];if(!o&&(Object.defineProperty(n,l,{value:o=new Proxy(n,E)}),!Array.isArray(n))){const t=Object.keys(n),f=Object.getOwnPropertyDescriptors(n);for(let r=0,i=t.length;r<i;r++){const s=t[r];if(f[s].get){const c=f[s].get.bind(o);Object.defineProperty(n,s,{get:c})}}}return o}function y(n){let e;return n!=null&&typeof n=="object"&&(n[l]||!(e=Object.getPrototypeOf(n))||e===Object.prototype||Array.isArray(n))}function d(n,e=new Set){let o,t,f,r;if(o=n!=null&&n[w])return o;if(!y(n)||e.has(n))return n;if(Array.isArray(n)){Object.isFrozen(n)?n=n.slice(0):e.add(n);for(let i=0,s=n.length;i<s;i++)f=n[i],(t=d(f,e))!==f&&(n[i]=t)}else{Object.isFrozen(n)?n=Object.assign({},n):e.add(n);const i=Object.keys(n),s=Object.getOwnPropertyDescriptors(n);for(let c=0,O=i.length;c<O;c++)r=i[c],!s[r].get&&(f=n[r],(t=d(f,e))!==f&&(n[r]=t))}return n}function g(n){let e=n[a];return e||Object.defineProperty(n,a,{value:e={}}),e}function h(n,e,o){return n[e]||(n[e]=S(o))}function T(n,e){const o=Reflect.getOwnPropertyDescriptor(n,e);return!o||o.get||!o.configurable||e===l||e===a||e===K||(delete o.value,delete o.writable,o.get=()=>n[l][e]),o}function k(n){if($()){const e=g(n);(e._||(e._=S()))()}}function z(n){return k(n),Reflect.ownKeys(n)}function S(n){const[e,o]=R(n,{equals:!1,internal:!0});return e.$=o,e}const E={get(n,e,o){if(e===w)return n;if(e===l)return o;if(e===P)return k(n),o;const t=g(n),f=t.hasOwnProperty(e);let r=f?t[e]():n[e];if(e===a||e==="__proto__")return r;if(!f){const i=Object.getOwnPropertyDescriptor(n,e);$()&&(typeof r!="function"||n.hasOwnProperty(e))&&!(i&&i.get)&&(r=h(t,e,r)())}return y(r)?j(r):r},has(n,e){if(e===w||e===l||e===P||e===a||e==="__proto__")return!0;const o=g(n)[e];return o&&o(),e in n},set(){return!0},deleteProperty(){return!0},ownKeys:z,getOwnPropertyDescriptor:T};function A(n,e,o,t=!1){if(!t&&n[e]===o)return;const f=n[e],r=n.length;o===void 0?delete n[e]:n[e]=o;let i=g(n),s;(s=h(i,e,f))&&s.$(()=>o),Array.isArray(n)&&n.length!==r&&(s=h(i,"length",r))&&s.$(n.length),(s=i._)&&s.$()}function _(n,e){const o=Object.keys(e);for(let t=0;t<o.length;t+=1){const f=o[t];A(n,f,e[f])}}function F(n,e){if(typeof e=="function"&&(e=e(n)),e=d(e),Array.isArray(e)){if(n===e)return;let o=0,t=e.length;for(;o<t;o++){const f=e[o];n[o]!==f&&A(n,o,f)}A(n,"length",t)}else _(n,e)}function u(n,e,o=[]){let t,f=n;if(e.length>1){t=e.shift();const i=typeof t,s=Array.isArray(n);if(Array.isArray(t)){for(let c=0;c<t.length;c++)u(n,[t[c]].concat(e),o);return}else if(s&&i==="function"){for(let c=0;c<n.length;c++)t(n[c],c)&&u(n,[c].concat(e),o);return}else if(s&&i==="object"){const{from:c=0,to:O=n.length-1,by:D=1}=t;for(let b=c;b<=O;b+=D)u(n,[b].concat(e),o);return}else if(e.length>1){u(n[t],e,[t].concat(o));return}f=n[t],o=[t].concat(o)}let r=e[0];typeof r=="function"&&(r=r(f,o),r===f)||t===void 0&&r==null||(r=d(r),t===void 0||y(f)&&y(r)&&!Array.isArray(r)?_(f,r):A(n,t,r))}function p(...[n,e]){const o=d(n||{}),t=Array.isArray(o),f=j(o);function r(...i){N(()=>{t&&i.length===1?F(o,i[0]):u(o,i)})}return[f,r]}export{p as c};
