import{z as K,c as g,A as Q,k as M,o as J,f as V,g as v,s as E,r as C,t as x,j as W,i as $,b as A,x as ee,a as B,B as te,F as re,y as j,h as se}from"./chunks/web.e9187fcd.js";import{M as U,T as oe}from"./chunks/modal.a298d3e9.js";import{BoardContainer as ne}from"./game.2c340997.js";import{c as le}from"./chunks/store.38cbc661.js";import{t as R}from"./chunks/tooltip.3cfe08a8.js";import{M as ie}from"./chunks/eyedropper-variant.3ff78677.js";import"./chunks/arrow-left-top.ea325c40.js";const ae=e=>{const t=Q(void 0);return[()=>{const l=e();return[f=>g(t.Provider,{get value(){return e()},get children(){return f.children}}),l]},()=>K(t)]};function ce(e){const[t,r]=M(),s=e?.throw?(i,o)=>{throw r(i instanceof Error?i:new Error(o)),i}:(i,o)=>{r(i instanceof Error?i:new Error(o))},l=e?.api?Array.isArray(e.api)?e.api:[e.api]:[globalThis.localStorage].filter(Boolean),a=e?.prefix?`${e.prefix}.`:"",f=new Map,b=new Proxy({},{get(i,o){let n=f.get(o);n||(n=M(void 0,{equals:!1}),f.set(o,n)),n[0]();const d=l.reduce((c,h)=>{if(c!==null||!h)return c;try{return h.getItem(`${a}${o}`)}catch(S){return s(S,`Error reading ${a}${o} from ${h.name}`),null}},null);return d!==null&&e?.deserializer?e.deserializer(d,o,e?.options):d}}),m=(i,o,n)=>{const d=e?.serializer?e.serializer(o,i,n??e?.options):o,c=`${a}${i}`;l.forEach(S=>{try{S.getItem(c)!==d&&S.setItem(c,d)}catch(k){s(k,`Error setting ${a}${i} to ${d} in ${S.name}`)}});const h=f.get(i);h&&h[1]()},_=i=>l.forEach(o=>{try{o.removeItem(`${a}${i}`)}catch(n){s(n,`Error removing ${a}${i} from ${o.name}`)}}),u=()=>l.forEach(i=>{var o;try{(o=i?.clear)==null||o.call(i)}catch(n){s(n,`Error clearing ${i.name}`)}}),w=()=>{const i={},o=(n,d)=>{if(!i.hasOwnProperty(n)){const c=d&&e?.deserializer?e.deserializer(d,n,e?.options):d;c&&(i[n]=c)}};return l.forEach(n=>{if(typeof n.getAll=="function"){let d;try{d=n.getAll()}catch(c){s(c,`Error getting all values from in ${n.name}`)}for(const c of d)o(c,d[c])}else{let d=0,c;try{for(;c=n.key(d++);)i.hasOwnProperty(c)||o(c,n.getItem(c))}catch(h){s(h,`Error getting all values from ${n.name}`)}}}),i};return e?.sync!==!1&&J(()=>{const i=o=>{var n;let d=!1;l.forEach(c=>{try{c!==o.storageArea&&o.key&&o.newValue!==c.getItem(o.key)&&(o.newValue?c.setItem(o.key,o.newValue):c.removeItem(o.key),d=!0)}catch(h){s(h,`Error synching api ${c.name} from storage event (${o.key}=${o.newValue})`)}}),d&&o.key&&((n=f.get(o.key))==null||n[1]())};"addEventListener"in globalThis?(globalThis.addEventListener("storage",i),V(()=>globalThis.removeEventListener("storage",i))):(l.forEach(o=>{var n;return(n=o.addEventListener)==null?void 0:n.call(o,"storage",i)}),V(()=>l.forEach(o=>{var n;return(n=o.removeEventListener)==null?void 0:n.call(o,"storage",i)})))}),[b,m,{clear:u,error:t,remove:_,toJSON:w}]}var de=ce,ue=e=>(typeof e.clear=="function"||(e.clear=()=>{let t;for(;t=e.key(0);)e.removeItem(t)}),e),z=e=>{if(!e)return"";let t="";for(const r in e){if(!e.hasOwnProperty(r))continue;const s=e[r];t+=s instanceof Date?`; ${r}=${s.toUTCString()}`:typeof s=="boolean"?`; ${r}`:`; ${r}=${s}`}return t},y=ue({_cookies:[globalThis.document,"cookie"],getItem:e=>{var t;return((t=y._cookies[0][y._cookies[1]].match("(^|;)\\s*"+e+"\\s*=\\s*([^;]+)"))==null?void 0:t.pop())??null},setItem:(e,t,r)=>{var s;const l=y.getItem(e);y._cookies[0][y._cookies[1]]=`${e}=${t}${z(r)}`;const a=Object.assign(new Event("storage"),{key:e,oldValue:l,newValue:t,url:(s=globalThis.document)==null?void 0:s.URL,storageArea:y});window.dispatchEvent(a)},removeItem:e=>{y._cookies[0][y._cookies[1]]=`${e}=deleted${z({expires:new Date(0)})}`},key:e=>{let t=null,r=0;return y._cookies[0][y._cookies[1]].replace(/(?:^|;)\s*(.+?)\s*=\s*[^;]+/g,(s,l)=>(!t&&l&&r++===e&&(t=l),"")),t},get length(){let e=0;return y._cookies[0][y._cookies[1]].replace(/(?:^|;)\s*.+?\s*=\s*[^;]+/g,t=>(e+=t?1:0,"")),e}});const ge=()=>{const[e,t]=de({prefix:"gtumedei.color-guesser",serializer:r=>JSON.stringify(r),deserializer:r=>JSON.parse(r)});return[e,t]},fe=(e,t)=>{let r,s;return e<0?(r=0,s=t-e,Math.floor(Math.random()*(s-r+1)+r)+e):(r=e,s=t,Math.floor(Math.random()*(s-r+1)+r))},N=e=>e[e.length*Math.random()|0],me=e=>{const t=parseInt(e.slice(1,3),16),r=parseInt(e.slice(3,5),16),s=parseInt(e.slice(5,7),16);return`rgb(${t}, ${r}, ${s})`},he=e=>{const t=parseInt(e.slice(1,3),16)/255,r=parseInt(e.slice(3,5),16)/255,s=parseInt(e.slice(5,7),16)/255,l=Math.max(t,r,s),a=l-Math.min(t,r,s),f=a?l==t?(r-s)/a:l==r?2+(s-t)/a:4+(t-r)/a:0,b=Math.round(60*f<0?60*f+360:60*f),m=Math.round(100*(a?l<=.5?a/(2*l-a):a/(2-(2*l-a)):0)),_=Math.round(100*(2*l-a)/2);return`hsl(${b}, ${m}%, ${_}%)`},$e=e=>{const[t,r,s]=[parseInt(e.slice(1,3),16),parseInt(e.slice(3,5),16),parseInt(e.slice(5,7),16)].map(l=>Math.min(Math.max(l+fe(-25,25),0),255).toString(16).padStart(2,"0"));return`#${t}${r}${s}`},O=[{label:"Easy",grid:2},{label:"Normal",grid:3},{label:"Hard",grid:4},{label:"Harder",grid:5},{label:"Hardest",grid:6}],ve=["HEX","RGB","HSL"],xe=["#F44336","#E91E63","#9C27B0","#673AB7","#3F51B5","#2196F3","#03A9F4","#00BCD4","#009688","#4CAF50","#8BC34A","#CDDC39","#FFEB3B","#FFC107","#FF9800","#FF5722","#795548","#607D8B"],[be,L]=ae(()=>{const[e,t]=le({state:"IDLE",difficulty:O[0],mode:"HEX",streak:0,color:"---",colorGrid:[]}),[r,s]=ge(),l=()=>{s("streak",0),s("rightGuesses",0),s("wrongGuesses",0)},a=(o,n)=>{let d=new Array(o*o).fill(0).map(()=>N(xe));return new Set(d).forEach(h=>{const S=$e(h);d=d.map(k=>k==h?S:k)}),n=="RGB"?d.map(h=>me(h)):n=="HSL"?d.map(h=>he(h)):d},f=(o,n)=>{t("state","PLAYING"),t("difficulty",{...o}),t("mode",n),t("streak",0),m()},b=o=>{const n=o==e.color;return n?(t("streak",d=>d+1),s("rightGuesses",(r.rightGuesses??0)+1),s("streak",Math.max(r.streak??0,e.streak))):(t("streak",0),s("wrongGuesses",(r.wrongGuesses??0)+1)),n},m=()=>{t("colorGrid",a(e.difficulty?.grid??2,e.mode??"HEX")),t("color",N(e.colorGrid??[]))},[_,u]=M(!1),[w,i]=M(!1);return{difficulties:O,modes:ve,game:e,gameActions:{startGame:f,registerGuess:b,nextColor:m},storage:r,resetStorage:l,showSettingsModal:_,setShowSettingsModal:u,showStatsModal:w,setShowStatsModal:i}}),_e=x('<svg class="icon" viewBox="0 0 24 24" width="1.2em" height="1.2em"><path fill="currentColor" d="M21 7L9 19l-5.5-5.5l1.41-1.41L9 16.17L19.59 5.59L21 7Z"></path></svg>'),we=(e={})=>(()=>{const t=v(_e);return E(t,e,!0,!0),C(),t})(),Se=x('<svg class="icon" viewBox="0 0 24 24" width="1.2em" height="1.2em"><path fill="currentColor" d="M19 6.41L17.59 5L12 10.59L6.41 5L5 6.41L10.59 12L5 17.59L6.41 19L12 13.41L17.59 19L19 17.59L13.41 12L19 6.41Z"></path></svg>'),ye=(e={})=>(()=>{const t=v(Se);return E(t,e,!0,!0),C(),t})(),Ce=x('<svg class="icon" viewBox="0 0 24 24" width="1.2em" height="1.2em"><path fill="currentColor" d="M15.41 16.58L10.83 12l4.58-4.59L14 6l-6 6l6 6l1.41-1.42Z"></path></svg>'),Z=(e={})=>(()=>{const t=v(Ce);return E(t,e,!0,!0),C(),t})(),pe=x('<svg class="icon" viewBox="0 0 24 24" width="1.2em" height="1.2em"><path fill="currentColor" d="M8.59 16.58L13.17 12L8.59 7.41L10 6l6 6l-6 6l-1.41-1.42Z"></path></svg>'),X=(e={})=>(()=>{const t=v(pe);return E(t,e,!0,!0),C(),t})(),Me=x('<svg class="icon" viewBox="0 0 24 24" width="1.2em" height="1.2em"><path fill="currentColor" d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"></path></svg>'),ke=(e={})=>(()=>{const t=v(Me);return E(t,e,!0,!0),C(),t})(),Ee=x('<svg class="icon" viewBox="0 0 24 24" width="1.2em" height="1.2em"><path fill="currentColor" d="M3 22V8h4v14H3m7 0V2h4v20h-4m7 0v-8h4v8h-4Z"></path></svg>'),Y=(e={})=>(()=>{const t=v(Ee);return E(t,e,!0,!0),C(),t})(),q=x('<div class="bg-primary-dark flex rounded-full p-6 mb-6"></div>'),Le=x('<h4 class="section-subheading mb-2">Color Guesser</h4>'),Ge=x(`<p class="text-sm mb-8">Are you nerd enough to guess a color based on its RGB HEX code? Let's find out!</p>`),Ie=x('<div class="w-full flex flex-col border rounded-xl divide-y mb-8"><div class="w-full flex items-center gap-2 p-2"><h5 class="text-left text-sm font-mono font-bold flex-grow ml-2">Difficulty</h5><div class="flex gap-2 items-center"><button class="btn icon"></button><span class="text-sm w-16"></span><button class="btn icon"></button></div></div><div class="w-full flex items-center gap-2 p-2"><h5 class="text-left text-sm font-mono font-bold flex-grow ml-2">Mode</h5><div class="flex gap-2 items-center"><button class="btn icon"></button><span class="text-sm w-16"></span><button class="btn icon"></button></div></div></div>'),Be=x('<div class="w-full grid sm:grid-cols-2 gap-3"><button class="btn accent"></button><a href="/games" class="btn outline">Back to Games</a></div>'),Ae=x('<h4 class="section-subheading mb-8">Your Color Guesser Stats</h4>'),He=x('<div class="w-full flex flex-col border rounded-xl divide-y mb-8"><div class="w-full flex items-center gap-2 px-4 py-3"><h5 class="text-left text-sm font-mono font-bold flex-grow">Best streak</h5><p></p></div><div class="w-full flex items-center gap-2 px-4 py-3"><h5 class="text-left text-sm font-mono font-bold flex-grow">Total guesses</h5><p></p></div><div class="w-full flex items-center gap-2 px-4 py-3"><h5 class="text-left text-sm font-mono font-bold flex-grow">Accuracy</h5><p></p></div></div>'),Te=x('<div class="w-full flex"><button class="btn accent w-full sm:w-1/2 m-auto">Reset stats</button></div>'),Fe=x('<div class="w-full flex items-center p-2 rounded-xl border"><p class="ml-3 flex-grow">Color code: <!#><!/></p><button class="btn icon"></button><button class="btn icon"></button></div>'),De=x('<button class="group relative w-full h-full rounded-lg"><div><!#><!/><!#><!/></div></button>'),Pe=x('<div class="h-full grid gap-3"></div>'),Ve=()=>{const e=L(),[t,r]=M(0),s=()=>r(u=>Math.min(u+1,e.difficulties.length-1)),l=()=>r(u=>Math.max(u-1,0)),[a,f]=M(0),b=()=>f(u=>Math.min(u+1,e.modes.length-1)),m=()=>f(u=>Math.max(u-1,0)),_=()=>{e.setShowSettingsModal(!1),e.gameActions.startGame(e.difficulties[t()],e.modes[a()])};return J(()=>e.setShowSettingsModal(!0)),g(U,{class:"flex flex-col items-center text-center w-full",get show(){return e.showSettingsModal},get setShow(){return e.setShowSettingsModal},get persistent(){return e.game.difficulty==null},get children(){return[(()=>{const u=v(q);return $(u,g(ie,{class:"text-3xl text-accent"})),u})(),v(Le),v(Ge),(()=>{const u=v(Ie),w=u.firstChild,i=w.firstChild,o=i.nextSibling,n=o.firstChild,d=n.nextSibling,c=d.nextSibling,h=w.nextSibling,S=h.firstChild,k=S.nextSibling,G=k.firstChild,H=G.nextSibling,I=H.nextSibling;return n.$$click=l,$(n,g(Z,{})),$(d,()=>e.difficulties[t()].label),c.$$click=s,$(c,g(X,{})),G.$$click=m,$(G,g(Z,{})),$(H,()=>e.modes[a()]),I.$$click=b,$(I,g(X,{})),A(p=>{const T=t()==0,F=t()==e.difficulties.length-1,D=a()==0,P=a()==e.difficulties.length-1;return T!==p._v$&&(n.disabled=p._v$=T),F!==p._v$2&&(c.disabled=p._v$2=F),D!==p._v$3&&(G.disabled=p._v$3=D),P!==p._v$4&&(I.disabled=p._v$4=P),p},{_v$:void 0,_v$2:void 0,_v$3:void 0,_v$4:void 0}),C(),u})(),(()=>{const u=v(Be),w=u.firstChild;return w.$$click=_,$(w,()=>e.game.state=="IDLE"?"Play":"Restart"),C(),u})()]}})},Re=()=>{const e=L();return g(U,{class:"flex flex-col items-center text-center w-full",get show(){return e.showStatsModal},get setShow(){return e.setShowStatsModal},get children(){return[(()=>{const t=v(q);return $(t,g(Y,{class:"text-3xl text-accent"})),t})(),v(Ae),(()=>{const t=v(He),r=t.firstChild,s=r.firstChild,l=s.nextSibling,a=r.nextSibling,f=a.firstChild,b=f.nextSibling,m=a.nextSibling,_=m.firstChild,u=_.nextSibling;return $(l,()=>e.storage.streak??0),$(b,()=>(e.storage.rightGuesses??0)+(e.storage.wrongGuesses??0)),$(u,()=>+((e.storage.rightGuesses??0)/((e.storage.rightGuesses??0)+(e.storage.wrongGuesses??0))).toFixed(3)),t})(),(()=>{const t=v(Te),r=t.firstChild;return ee(r,"click",e.resetStorage,!0),C(),t})()]}})},ze=()=>{const e=L();return(()=>{const t=v(Fe),r=t.firstChild,s=r.firstChild,l=s.nextSibling,[a,f]=B(l.nextSibling),b=r.nextSibling,m=b.nextSibling;return $(r,()=>e.game.color,a,f),R(b,()=>[()=>"Stats","top"]),b.$$click=()=>e.setShowStatsModal(!0),$(b,g(Y,{})),R(m,()=>[()=>"Game Settings","top"]),m.$$click=()=>e.setShowSettingsModal(!0),$(m,g(ke,{})),C(),t})()},Ne=e=>{const[t,r]=M(!1),[s,l]=M(!1),a=L(),f=m=>new Promise(_=>setTimeout(_,m)),b=async()=>{a.gameActions.registerGuess(e.color)?(r(!0),await f(500),r(!1),a.gameActions.nextColor()):(l(!0),await f(500),l(!1))};return(()=>{const m=v(De),_=m.firstChild,u=_.firstChild,[w,i]=B(u.nextSibling),o=w.nextSibling,[n,d]=B(o.nextSibling);return m.$$click=b,$(_,g(we,{get class(){return`absolute-center h-1/2 w-1/2 text-black-54 ${t()?"opacity-100":"opacity-0"} transition-opacity`}}),w,i),$(_,g(ye,{get class(){return`absolute-center h-1/2 w-1/2 text-black-54 ${s()?"opacity-100":"opacity-0"} transition-opacity`}}),n,d),A(c=>{const h=`background-color: ${e.color};`,S=`
        absolute -inset-1.5 rounded-xl border border-accent pointer-events-none
        bg-white-12 opacity-0 group-hover:opacity-100 transition-all
        ${t()?"!opacity-100 !bg-white-50":""}
        ${s()?"!opacity-100 !bg-white-50":""}
      `;return c._v$5=j(m,h,c._v$5),S!==c._v$6&&se(_,c._v$6=S),c},{_v$5:void 0,_v$6:void 0}),C(),m})()},Oe=()=>{const e=L();return g(oe,{enterClass:"opacity-0",exitToClass:"opacity-0",enterActiveClass:"transition-opacity",exitActiveClass:"transition-opacity",mode:"outin",get children(){return g(te,{get when(){return e.game.colorGrid},keyed:!0,children:t=>{const r=e.game.difficulty?.grid;return(()=>{const s=v(Pe);return $(s,g(re,{each:t??[],children:l=>g(Ne,{color:l})})),A(l=>j(s,`grid-template-columns: repeat(${r}, minmax(0, 1fr));`,l)),s})()}})}})},Ke=()=>{const[e]=be();return g(e,{get children(){return[g(ne,{get children(){return g(Oe,{})}}),g(ze,{}),g(Ve,{}),g(Re,{})]}})};W(["click"]);export{Ke as default};
